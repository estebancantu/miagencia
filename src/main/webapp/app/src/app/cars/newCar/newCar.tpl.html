<div class="container-fluid padding-right-45">
  <div class="row">

    <div class="col-md-8 col-md-offset-2" ng-controller="newCarCtrl">

    <h2 class="page-header">&nbsp;<i class="fa fa-car"></i>  Nuevo Auto</h2>


				  <!-- spinner -->
      <div class="sk-fading-circle" ng-show="showSpinner">
        <div class="sk-circle1 sk-circle"></div>
        <div class="sk-circle2 sk-circle"></div>
        <div class="sk-circle3 sk-circle"></div>
        <div class="sk-circle4 sk-circle"></div>
        <div class="sk-circle5 sk-circle"></div>
        <div class="sk-circle6 sk-circle"></div>
        <div class="sk-circle7 sk-circle"></div>
        <div class="sk-circle8 sk-circle"></div>
        <div class="sk-circle9 sk-circle"></div>
        <div class="sk-circle10 sk-circle"></div>
        <div class="sk-circle11 sk-circle"></div>
        <div class="sk-circle12 sk-circle"></div>
      </div>


  <div class="well well-shadow" ng-hide="showSpinner">
		<form class="new-car-form-fields" name="newVehicleForm" role="form" novalidate>


				<fieldset>
					<legend class="new-car-legend"><span class="step-number">&#9312;</span><strong class="new-car-legend-text">Vendedor o Consignante</strong>
					</legend>
					<div class="form-group" ng-class="{'has-error': newVehicleForm.repeatSelect.$invalid && newVehicleForm.repeatSelect.$touched}">
							 <select name="repeatSelect" id="clientSelect" class="form-control new-car-form-control" ng-model="selectedClientId" required>
					      			<option ng-repeat="client in clientList" value="{{client.id}}">{{client.firstName}}&nbsp;{{client.lastName}}</option>
					   </select>
								<div class="help-block" 
									ng-show="newVehicleForm.repeatSelect.$error.required && newVehicleForm.repeatSelect.$touched">Debe seleccionar un vendedor</div>
			  </div>
				</fieldset>



				<fieldset>
    		<legend class="new-car-legend"><span class="step-number">&#9313;</span><strong class="little-left-margin">Tipo de Operaci&oacute;n</strong>
    		</legend>
					<div class="form-group new-car-form-control operation-type-panel">

					  <div class="checkbox">
		  					<label><input type="radio" name="optradio" value="BUY" ng-model="opType" /><div class="buy-operation-type operation-label">Compra</div><p class="operation-type-help-block">El veh&iacute;culo es adquirido por esta agencia.</p></label>
						</div>

						<div class="checkbox">
		  					<label><input type="radio" name="optradio" value="CONSIGNMENT" ng-model="opType" /><div class="buy-operation-type operation-label">Consignaci&oacute;n</div><p class="operation-type-help-block">El veh&iacute;culo se toma en consignaci&oacute;n.</p></label>
						</div>
					</div>
				</fieldset>



			<fieldset>
				<legend class="new-car-legend"><span class="step-number">&#9314;</span><strong class="new-car-legend-text">Tipo de Veh&iacute;culo</strong>
				</legend>
					<div class="form-group" ng-class="{'has-error': newVehicleForm.vehicleTypeSelect.$invalid && newVehicleForm.vehicleTypeSelect.$touched}">
						<select name="vehicleTypeSelect" class="form-control new-car-form-control" ng-model="newCar.vehicleType" ng-options="vehicleType.name for vehicleType in availableVehicles" required>
						  <option value="">Tipo..</option>
						</select>
											<div class="help-block" 
         					ng-show="newVehicleForm.vehicleTypeSelect.$error.required && newVehicleForm.vehicleTypeSelect.$touched">Debe seleccionar un tipo de veh&iacute;culo</div>
					</div>

					<div class="form-group" ng-class="{'has-error': newVehicleForm.makeSelect.$invalid && newVehicleForm.makeSelect.$touched}">
						<select name="makeSelect" class="form-control new-car-form-control" ng-model="newCar.make" 
							ng-options="make.name for make in newCar.vehicleType.makes | orderBy: 'name'" required>
						  <option value="">Marca..</option>
						</select>
					<div class="help-block" 
         					ng-show="newVehicleForm.makeSelect.$error.required && newVehicleForm.makeSelect.$touched">Debe seleccionar una marca</div>
					</div>
					
					<div class="form-group" ng-class="{'has-error': newVehicleForm.modelSelect.$invalid && newVehicleForm.modelSelect.$touched}">
						<select name="modelSelect" class="form-control new-car-form-control" ng-model="newCar.model" 
							ng-options="model.name for model in newCar.make.models | orderBy: 'name'" required>
						  <option value="">Modelo..</option>
						</select>
					<div class="help-block" 
         					ng-show="newVehicleForm.modelSelect.$error.required && newVehicleForm.modelSelect.$touched">Debe seleccionar un modelo</div>
					</div>
					
				
					<div class="form-group" ng-class="{'has-error': newVehicleForm.conditionSelect.$invalid && newVehicleForm.conditionSelect.$touched}">
						<select name="conditionSelect" class="form-control new-car-form-control" ng-model="newCar.vehicleCondition" 
							ng-options="condition for condition in vehicleConditions" required>
						  <option value="">Condici&oacute;n..</option>
						</select>
					<div class="help-block" 
         					ng-show="newVehicleForm.conditionSelect.$error.required && newVehicleForm.conditionSelect.$touched">Debe seleccionar un modelo</div>
					</div>
				  	<div class="form-group">
						<select class="form-control new-car-form-control" ng-model="newCar.fuelType" 
							ng-options="fuel for fuel in fuelTypes">
						  <option value="">Combustible..</option>
						</select>
					</div>
					<div class="form-group">
						<select class="form-control new-car-form-control" ng-model="newCar.doors" 
							ng-options="door for door in doors">
						  <option value="">Cantidad de Puertas..</option>
						</select>
					</div>
					<div class="form-group">
						<select class="form-control new-car-form-control" ng-model="newCar.color" 
							ng-options="color for color in colors">
						  <option value="">Color..</option>
						</select>
					</div>
					<div class="form-group">
						<select class="form-control new-car-form-control" ng-model="newCar.transmissionType" 
							ng-options="transmission for transmission in transmissionTypes">
						  <option value="">Transmisi&oacute;n..</option>
						</select>
					</div>
			</fieldset>
			<br/>
			<fieldset>
						<legend class="new-car-legend"><span class="step-number">&#9315;</span><strong class="new-car-legend-text">Detalles del Veh&iacute;culo</strong>
						</legend>
					<div class="form-group" ng-class="{'has-error': newVehicleForm.yearSelect.$invalid && newVehicleForm.yearSelect.$touched}">
						<select name="yearSelect" class="form-control new-car-form-control" ng-model="newCar.year" 
							ng-options="year for year in years" required>
						  <option value="">A&ntilde;o..</option>
						</select>
						<div class="help-block" 
         					ng-show="newVehicleForm.yearSelect.$error.required && newVehicleForm.yearSelect.$touched">Debe seleccionar un a√±o</div>
					</div>
					
					<div class="form-group" ng-class="{'has-error': newVehicleForm.kilometers.$invalid && newVehicleForm.kilometers.$touched}">
					  <input type="text" name="kilometers" class="form-control new-car-form-control" id="exampleInputEmail1" placeholder="Kil&oacute;metros" ng-model="newCar.kilometers" required ui-number-mask="0">
					  <span class="help-block" 
         					ng-show="newVehicleForm.kilometers.$error.required && newVehicleForm.kilometers.$touched">El campo es requerido</span>
					</div>
					<div class="form-group" ng-class="{'has-error': newVehicleForm.plate.$invalid && newVehicleForm.plate.$touched}">
					  <input type="text" name="plate" class="form-control new-car-form-control" id="exampleInputEmail1" placeholder="N&uacute;mero de patente" ng-model="newCar.plate" required>
					  <span class="help-block" 
         					ng-show="newVehicleForm.plate.$error.required && newVehicleForm.plate.$touched">El campo es requerido</span>
					</div>
					<div class="form-group">
					  <input type="text" class="form-control new-car-form-control" id="exampleInputEmail1" placeholder="N&uacute;mero de motor" ng-model="newCar.engineNumber">
					</div>
					<div class="form-group">
					  <input type="text" class="form-control new-car-form-control" id="exampleInputEmail1" placeholder="N&uacute;mero de chassis" ng-model="newCar.chassisNumber">
					</div>
					</br>
					<fieldset class="form-group">
				    	<textarea class="form-control new-car-form-control description-control" id="publicDescription" rows="3" ng-model="newCar.publicDescription" placeholder="Descripci&oacute;n publica" ng-maxlength="350"></textarea>
				    	<!-- esto mejorarlo o sacarlo, nunca va a pasar -->
				    	<span class="help-block" 
         					ng-show="newVehicleForm.publicDescription.$error.maxlength">El texto debe ser de 250 car&aacute;cteres de longitud como m&aacute;ximo</span>
		  			</fieldset>
		  			</br>
		  			<fieldset class="form-group">
				    	<textarea class="form-control new-car-form-control description-control" id="privateDescription" rows="3" ng-model="newCar.privateDescription" placeholder="Descripci&oacute;n interna" ng-maxlength="350"></textarea>
				    	<!-- esto mejorarlo o sacarlo, nunca va a pasar -->
				    	<span class="help-block" 
         					ng-show="newVehicleForm.privateDescription.$error.maxlength">El texto debe ser de 250 car&aacute;cteres de longitud como m&aacute;ximo</span>
		  			</fieldset>
			
			</fieldset>



			<fieldset>
						<legend class="new-car-legend"><span class="step-number">&#9316;</span><strong class="new-car-legend-text">Fotos del Veh&iacute;culo</strong>
						</legend>

						<div class="form-group">

								<button class="btn btn-danger btn-select-pic" ngf-select ng-model="picFile" accept="image/*">Seleccionar...</button>

									<div ngf-drop ng-model="picFile" ngf-pattern="image/*"
             class="cropArea">
            <img-crop image="picFile | ngfDataUrl" 
             area-type="rectangle" aspect-ratio="1.33" result-image-size='{w: 500,h: 375}' result-image="croppedDataUrl" ng-init="croppedDataUrl=''">
            </img-crop>
        </div>
						</div>
						<div class="form-group">
							<div class="row cropped-image-container">	

					            	<img ng-src="{{croppedDataUrl}}" />

						<button type="submit" class="btn btn-danger pull-right btn-save-pic pull-left" ng-click="upload(croppedDataUrl, picFile.name)" ng-disabled="picFile === undefined">Subir</button> 

						<span class="progress upload-progress" ng-show="progress >= 0">
			          <div style="width:{{progress}}%" ng-bind="progress + '%'"></div>
			   </span>
			    <div class="success-upload-legend" ng-show="progress == 100">La imagen se ha subido exitosamente.</div>
			   <span class="err" ng-show="errorMsg">{{errorMsg}}</span>

							</div>
						</div>
						<div class="form-group">
										<div class="row car-thumbs">
			        	<legend class="uploaded-images-legend">Im&aacute;genes subidas</legend>
			        	<div class="car-thumbs-container">
				            <div class="col-lg-4 col-md-4 col-xs-4 thumb">
				                <a class="thumbnail" href="{{imageUrl[0]}}">
				                    <img class="img-responsive" src="{{imageUrl[0]}}">
				                </a>
				            </div>
				            <div class="col-lg-4 col-md-4 col-xs-4 thumb">
				                <a class="thumbnail" href="{{imageUrl[1]}}">
				                    <img class="img-responsive" src="{{imageUrl[1]}}" alt="">
				                </a>
				            </div>
				            <div class="col-lg-4 col-md-4 col-xs-4 thumb">
				                <a class="thumbnail" href="{{imageUrl[2]}}">
				                    <img class="img-responsive" src="{{imageUrl[2]}}" alt="">
				                </a>
				            </div>
				            	<div class="col-lg-4 col-md-4 col-xs-4 thumb">
				                <a class="thumbnail" href="#">
				                    <img class="img-responsive" src="{{imageUrl[3]}}" alt="">
				                </a>
				            </div>
				            	<div class="col-lg-4 col-md-4 col-xs-4 thumb">
				                <a class="thumbnail" href="#">
				                    <img class="img-responsive" src="{{imageUrl[4]}}" alt="">
				                </a>
				            </div>
				            <div class="col-lg-4 col-md-4 col-xs-4 thumb">
				                <a class="thumbnail" href="#">
				                    <img class="img-responsive" src=src="{{imageUrl[5]}}" alt="">
				                </a>
				            </div>
				      </div>
			        </div>
						</div>
			</fieldset>
				


			<fieldset>

					</br>
					</br>

					</br>
					</br>
					<fieldset>
						<legend class="new-car-legend"><span class="step-number">&#9317;</span><strong class="new-car-legend-text">Documentaci&oacute;n del Veh&iacute;culo</strong>
						</legend>
					<div class="form-group new-car-form-control">
						 <label class="control-label" for="exampleInputEmail1"></label>
						<div class="checkbox">
							</br>
							    <label>
							      <input type="checkbox" ng-model="hasRegistration"> Posee T&iacute;tulo
							    </label>
						</div>	
						<div class="checkbox">
							    <label>
							      <input type="checkbox" ng-model="hasDomainCertificate"> Posee Certificado de Dominio
							    </label>
						</div>	
						</br>

						<div>
							  <a href="http://hitman.arba.gov.ar/AvisoDeudas/?imp=1" class="btn btn-default btn-lg btn-block new-car-check-debts-buttons" target="_blank">Consulta Deuda patentes Prov. Buenos Aires</a>
						</div>
						<div>
							  <a href="https://lbserver02.agip.gob.ar/ConsultaPat/" class="btn btn-default btn-lg btn-block new-car-check-debts-buttons" target="_blank">Consulta Deuda patentes Capital Federal</a>
						</div>
						<div class="checkbox">
				    <label>
				      <input type="checkbox"> Posee deuda de patentes?
				    </label>
						</div>
						 <div class="form-group">			    		
							      <div class="input-group new-vehicle-input-amount">
							      	<div class="input-group-addon">$</div>
							      	<input type="text" class="form-control" id="exampleInputAmount" placeholder="Monto adeudado en concepto de patentes" ng-model="taxDebt" ui-number-mask="0">
							    	<div class="input-group-addon">.00</div>
							      </div>
							 </div>
							 </br>
							 <div>
											<a href="https://www.infraccionesba.net/webInfractor.do?method=consultaInfracciones" class="btn btn-default btn-lg btn-block new-car-check-debts-buttons" target="_blank">Consulta Infracciones Prov. Buenos Aires</a>
								</div>
							 <div>
							    <a href="http://www.buenosaires.gob.ar/consulta-de-infracciones" class="btn btn-default btn-lg btn-block new-car-check-debts-buttons" target="_blank">Consulta Infracciones Capital Federal</a>
								</div>	
								<div class="checkbox">
						    <label>
						      <input type="checkbox"> Posee multas impagas?
						    </label>
							 </div>	
							 <div class="form-group">
							      <div class="input-group new-vehicle-input-amount">
							      	<div class="input-group-addon">$</div>
							      	<input type="text" class="form-control" id="exampleInputAmount" placeholder="Monto adeudado en concepto de multas impagas" ng-model="trafficTicketsDebt" ui-number-mask="0">
							    	<div class="input-group-addon">.00</div>
							      </div>
							 </div>	

					</div>
			</fieldset>

			<fieldset>
		    <legend class="new-car-legend"><span class="step-number">&#9318;</span><strong class="new-car-legend-text">Precio</strong>
		    </legend>
		    </br>
					<div class="form-group new-car-form-control" ng-class="{'has-error': newVehicleForm.buyingPrice.$invalid && newVehicleForm.buyingPrice.$touched}">
						<label ng-show="opType == 'BUY'" class="control-label" for="exampleInputEmail1">Valor al que se compra el Veh&iacute;culo</label>
						<label ng-show="opType == 'CONSIGNMENT'" class="control-label" for="exampleInputEmail1">Monto que recibe el vendedor</label>
						<div class="input-group new-vehicle-input-amount">
				      			<div class="input-group-addon">$</div>
				      			<input type="text" name="buyingPrice" class="form-control" id="exampleInputAmount" ng-model="dealPrice" required ui-number-mask="0">
				    			<div class="input-group-addon">.00</div>
				      		</div>
				      		<span class="help-block" 
	     					ng-show="newVehicleForm.buyingPrice.$error.required && newVehicleForm.buyingPrice.$touched">El campo es requerido</span>
					</div>

					</br>
					<div class="form-group new-car-form-control" ng-class="{'has-error': newVehicleForm.sellingPrice.$invalid && newVehicleForm.sellingPrice.$touched}">
						<label class="control-label" for="exampleInputEmail1">Valor de venta del Veh&iacute;culo</label>
						<div class="input-group new-vehicle-input-amount">
				      			<div class="input-group-addon">$</div>
				      			<input type="text" name="sellingPrice" class="form-control" id="exampleInputAmount" ng-model="sellingPrice" ui-number-mask="0" placeholder="Precio al que se pone a la venta a este ve&iacute;culo" required>
				    			<div class="input-group-addon">.00</div>
				      		</div>
				      		<span class="help-block" 
	     					ng-show="newVehicleForm.sellingPrice.$error.required && newVehicleForm.sellingPrice.$touched">El campo es requerido</span>
	
					</br>
					<div class="form-group col-md-9 revenue-title">
					<label for="exampleInputEmail1">Margen de ganancia</label>
					</br>  
					</div>
					<div class="form-group revenue-container new-car-form-control">

						<div class="col-md-6 text-center">
						<div class="revenue-area-first well">
							<span ng-class="{'revenue color-negative-revenue': marginPrice < 0, 'revenue color-zero-revenue': marginPrice == 0, 'revenue color-positive-revenue': marginPrice > 0, 'revenue hidden-no-revenue': sellingPrice == undefined && dealPrice == undefined}">$&nbsp;{{ marginPrice = sellingPrice - (dealPrice + taxDebt + trafficTicketsDebt) | number }}
							</span>
						</div>
						</div>  
						<div class="col-md-6">
						<div class="revenue-area-last well">
							<span ng-class="{'revenue color-negative-revenue': marginPrice < 0, 'revenue color-zero-revenue': marginPrice == 0, 'revenue color-positive-revenue': marginPrice > 0, 'revenue hidden-no-revenue': sellingPrice == undefined && dealPrice == undefined}">%&nbsp;{{(sellingPrice - (dealPrice + taxDebt + trafficTicketsDebt)) * 100 / dealPrice | number:2}}&nbsp;
							</span>
						</div>
						</div>
					</div>
		   </div>

				</br>		
				<div class="row">
			                  <div class="col-sm-6 col-sm-offset-4">
			                    <div class="form-group">
			                      <div class="col-sm-offset-2 col-sm-10 new-car-buttons">
			                        <div class="pull-right">
			                          <button type="submit" ng-click="cancelModal()" class="btn btn-default">Cancelar</button>
			                          <button type="submit" class="btn btn-danger" ng-disabled="newVehicleForm.$invalid" ng-click="saveNewCar()">Guardar </button>
			                        </div>
			                      </div>
			                    </div>
			                  </div>
			            	</div>

			</fieldset>
		</form>

		<ng-include src="'modals/cancelConfirmation.tpl.html'" ></ng-include>
		<ng-include src="'modals/saveSuccessModal.tpl.html'" ></ng-include>



	</div>
	<div class="col-md-3"></div>
</div>
</div>